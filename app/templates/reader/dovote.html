{% extends 'reader/base.html' %}

{% block card_header %}
<span><a href="/index"> 投票问卷 / </a></span><span>参加投票</span>
{% endblock %}


{% block card_body %}
<div class="add-vote" style="margin: 10px 50px">
        <p class="layui-text">
            投票标题：{{ title }}
        </p>
        <p class="layui-code" style="height: 100px; overflow: auto;">
            <span class="run">{{ content }}</span>
        </p>
        <p class="layui-text">
            提示：最多选择{{ max_choice }}个选项
        </p>
        <form class="layui-form" method="post">
            <div class="layui-form-item">
                <div class="layui-input-inline">
                    {% if max_choice == 1 %}
                        {% for i in range(total_choice) %}
                            {% if i == 0 %}
                                <input type="radio" id="schoice" name="schoice" value="{{ i + 1 }}" title="{{ choices[i] }}" checked="">
                            {% else %}
                                <input type="radio" id="schoice" name="schoice" value="{{ i + 1 }}" title="{{ choices[i] }}">
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        {% for i in range(total_choice) %}
                            <input type="checkbox" id="mchoice" name="mchoice{{ i + 1 }}" lay-skin="primary" title="{{ choices[i] }}" >
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="layui-input-inline">
                <input class="layui-btn layui-btn-normal" type="submit" name="submit" value="投票" id="dovote" style="margin: 0 160px">
            </div>
        </form>
    </div>
{% endblock %}

{% block script %}


<script src="../static/layui/layui.js"></script>
<script>
layui.use(['layer'], function(){
    var layer = layui.layer
    {% for message in get_flashed_messages() %}
        layer.msg('{{ message }}');
    {% endfor %}
});

layui.use('form', function(){
  var form = layui.form;
});

layui.use('laydate', function(){
    var laydate = layui.laydate;

    //执行一个laydate实例
    laydate.render({
        elem: '#enddate', //指定元素
        type: 'datetime'
    });
});
</script>

<script>
    var choices = '';
    var index = 1;
    $("#addchoice").on('click',function (){
        if($("#choiceinput").val() != '')
        {
            choices = choices + $("#choiceinput").val() + '^';
            console.log(choices);
            $("#newchoices").append('<p>' + '选项' + index.toString() + ': ' + $("#choiceinput").val() + '</p>')
            $("#subchoices").val(choices);
            $("#choiceinput").val('');
            index++;
        }
    })
</script>
{% endblock %}
